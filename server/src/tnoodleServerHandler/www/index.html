<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"> 
	<head>
		<title>TNoodleServer</title>
		<style media="screen" type="text/css">
			table{
				border-spacing:0px; 
				border-top:1px solid silver;
				border-left:1px solid silver;
				border-right:0;
				border-bottom:1px solid silver;
				background-color:#FAFAFA; 
				
			}
			th{
				background-color:#DDDDDD; 
				border-right:1px solid silver;
				text-align:center;
			}
			h2{
				margin-top:10px;
			}
			td{
				vertical-align:top;
				border-top:1px solid grey; 
				border-right: 1px solid silver;
				padding:10px;
			}
			em{
				font-style:normal;
				font-weight:bold;
			}
			#examples img{
				border:0;
				float:none;
			}
			#content_v{
				margin:10px 50px;
				text-align:left;
			}
			#header_v{
				margin:10px 50px;
				text-align:left;
				
			}
			#header_v img{
				float:right;
				border:none;
			}
		</style>
	</head>
	<body>
		<div id="header_v">
			<h1>TNoodleServer</h1>
			A many purpose http server for twisty puzzles.
			Or check out <a href="/tnt/">TNT</a>, a new timer.
			Or try out the new <a href="/scramble/">wca scramble generator</a>.
			<br/><br/>
		</div> 
		<div id="content_v"> 
			<h2>Instructions</h2> 
			Simply point your browser to <a href="/puzzles/">/puzzles/</a> to get a list of available puzzles in JSON format.<br/> 
			Choose one of these to get a scramble:
			<a href="/scramble/.txt?=3x3x3">/scramble/.txt?=3x3x3</a>
			<br/><br/><br/> 
			<h2>Examples</h2>
			<div id="examples">
				<a href="/scramble/.txt?=3x3x3*12&seed=cubing">/scramble/.txt?=3x3x3*12&seed=cubing</a>
				<a href="/scramble/.json?=3x3x3">/scramble/.json?=3x3x3</a>
				<a href="/scramble/My Comp.pdf?3x3 Round 1=3x3x3*5*2&3x3 Round 2=3x3x3*5">/scramble/My Comp.pdf?3x3 Round 1=3x3x3*5*2&3x3 Round 2=3x3x3*5</a>
				<a href="/view/sq1.png?scramble=(3, 3) /"><img src="/view/sq1.png?scramble=(3, 3) /" /></a>
			</div> 
			<br/><br/><br/>
			<h2>Features</h2> 
			<ul> 
				<li>All pages serving up JSON also support JSONP via a callback parameter.</li> 
			</ul> 
			<br/> 
			<h2>Todo</h2> 
			<div>
				Stuff that needs to be done
				<ul>
					<li>The scramble plugin code is a *mess*</li>
					<li>Mod <a href="http://koii.cubingusa.com/lib/scrambles/competition_scrambles.html">this</a> to use the TNoodleServer as a backend</li>
				</ul>
				<br/><br/>
			</div>

			<pre>
			http://localhost:8080/scramble/[TITLE].[txt|json|pdf|zip]?OPTIONS
			
			OPTIONS include "seed", "showIndices" and most importantly, an arbitrary number of PUZZLE_REQUEST's.
			
			PUZZLE_REQUEST's look like this:
			
			TITLE=3x3x3*COUNT*COPIES*SCHEME
			
			Puzzle request titles must be unique.
			
			Here are some examples:
			
			scramble/My Comp.pdf?3x3 Round 1=3x3x3*5 - A single 3x3 sheet of 5 scrambles.
			scramble/My Comp.pdf?3x3 Round 1=3x3x3*5*2 - 2 identical copies of a 3x3 sheet of 5 scrambles. This will produce a 2 page PDF.
			scramble/My Comp.pdf?3x3 Round 1=3x3x3*5*2&3x3 Round 2=3x3x3*5 - 2 identical copies of a 3x3 sheet of 5 scrambles (titled "3x3 Round 1") 
			followed by 1 page of 5 3x3 scrambles (titled "3x3 Round 2"). This will produce a 3 page PDF.
			
			scramble/My Comp.zip?3x3 Round 1=3x3x3*5*2&3x3 Round 2=3x3x3*5 - This will produce a zip file containing 2 pdfs, one named "3x3 Round 1.pdf" and 
			the other named "3x3 Round 2.pdf". Note that when the file extension is "zip", we ignore the COPIES option. I think this is a good decision.
			</pre>
			
			<h2>/view/puzzlename.ext?scramble=SCRAMBLE&width=WIDTH&height=HEIGHT&callback=CALLBACK</h2>
			<table>
				<tr><th>Variable</th><th>Description</th><th>Value Range</th><th>Default</th><th>Comment</th></tr>
				<tr><td><em>.ext</em></td><td>script extension</td><td> .png | .json </td><td></td>
					<td>If .png, then the scramble will be drawn as a png file. If .json, then boundaries of the faces will be returned in json format.</td></tr>
				<tr><td><em>width</em></td><td>width</td><td>integer</td><td>0</td>
					<td>This is the maximum allowed width for the resulting image. It will not screw up the image's aspect ratio.
					If 0, it will attempt to use the preferred width.</td></tr>
				<tr><td><em>height</em></td><td>height</td><td>integer</td><td>0</td>
					<td>This is the maximum allowed height for the resulting image. It will not screw up the image's aspect ratio.
					If 0, it will attempt to use the preferred height.</td></tr>
				<tr><td><em>callback</em></td><td>jsonp callback</td><td>The name of a javascript function</td><td></td>
					<td>This parameter only applies if the extension is .json. If so, the resulting json will be padded accordingly.</td></tr>
				<tr><td><em>scheme</em></td><td>color scheme</td><td></td><td></td>
					<td>See above</td></tr>
			</table>
			<h2>/import?url=URL&callback=CALLBACK</h2>
			<table>
				<tr><th>Variable</th><th>Description</th><th>Value Range</th><th>Default</th><th>Comment</th></tr>
				<tr><td><em>url</em></td><td>A url pointing to a text file with newline separated scrambles</td><td></td><td></td>
					<td>The scrambles will be returned as a json array.</td></tr>
				<tr><td><em>callback</em></td><td>jsonp callback</td><td>The name of a javascript function</td><td></td>
					<td>This parameter only applies if the extension is .json. If so, the resulting json will be padded accordingly.</td></tr>
			</table>
			<br/><br/> 
		</div> 
		<div id="footer"> 
			Copyright &copy; 2010 <a href="http://www.crider.co.uk">Conrad Rider</a>.
			<br/>I stole this page format from Conrad Rider's excellent documentation for his VisualCube software.
		</div> 
	</body> 
</html>
